rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Default: deny all
    match /{document=**} {
      allow read, write: if false;
    }

    // User preferences (theme, colorTheme): only own document
    match /preferences/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // Wishlist categories and types: only own subcollections
    match /users/{userId}/wishlistCategories/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    match /users/{userId}/wishlistTypes/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    match /users/{userId}/wishlistItems/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Monthly budget debit (user-wise, per month)
    match /users/{userId}/budgetDebit/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Monthly budget items (daily budget list per user)
    match /users/{userId}/budgetItems/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Expense categories (user-wise): name, icon, color
    match /users/{userId}/expenseCategories/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Expense types (user-wise): name, categoryId, mainCategoryId, group
    match /users/{userId}/expenseTypes/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    // Expense entries (user-wise): add/edit/delete category-wise
    match /users/{userId}/expenseEntries/{docId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
